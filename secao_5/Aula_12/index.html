<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="index.css">
  <title>Condicionais - IF Else - Parte 2</title>
</head>
<body>
  
  <div class="box">
    <form class="my-form">

      <div class="form-field" id="form-field-nome">
        <input type="text" id="nome" placeholder="Seu Nome">
        <span></span>
      </div>

       <div class="form-field" id="form-field-email">
        <input type="email" id="email" placeholder="Seu Email">
        <span></span>
      </div>

    </form>
  </div>
  <button class="validate" onclick="validaForm()">VALIDAR</button>

  <script>
    //Expressão regular que checa se um email é válido
    //Regex
    var isEmail = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

    var fieldNome = document.getElementById('nome');
    var fieldEmail = document.getElementById('email');

    function validaForm() {
      var nomeStr = fieldNome.value;
      var emailStr = fieldEmail.value;
      var wrapperNome = document.getElementById('form-field-nome');
      var wrapperEmail = document.getElementById('form-field-email');

      if(nomeStr.length > 0 && nomeStr.length >= 3) {
        wrapperNome.querySelector('span').classList.add('success');
        wrapperNome.querySelector('span').innerText = "Validado com Sucesso";
      }
      else {
        wrapperNome.querySelector('span').classList.add('error');
        wrapperNome.querySelector('span').innerText = "Informação Inválida";
      }

      if(isEmail.test(emailStr)) {
        wrapperEmail.querySelector('span').classList.add('success');
        wrapperEmail.querySelector('span').innerText = "Email Validado com Sucesso";
      }
      else {
        wrapperEmail.querySelector('span').classList.add('error');
        wrapperEmail.querySelector('span').innerText = "Email Inválido";
      }


    }

  </script>

</body>
</html>